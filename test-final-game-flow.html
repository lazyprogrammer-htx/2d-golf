<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Game Flow Test - Mini Golf Master</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
    <script src="objects/Wall.js"></script>
    <script src="objects/SandTrap.js"></script>
    <script src="objects/Club.js"></script>
    <script src="objects/PowerMeter.js"></script>
    <script src="objects/LevelLoader.js"></script>
    <script src="ui/ClubSelector.js"></script>
    <script src="ui/LevelCompleteOverlay.js"></script>
    <script src="utils/SaveManager.js"></script>
    <script src="scenes/MenuScene.js"></script>
    <script src="scenes/LevelSelectScene.js"></script>
</head>
<body>
    <div style="max-width: 800px; margin: 0 auto; text-align: center;">
        <h1>Final Game Flow Test</h1>
        <p>Testing complete game loop: Menu → Level Select → Game → Level Complete → Next Level/Level Select</p>
        
        <div style="border: 2px solid #4CAF50; margin: 20px 0;">
            <div class="game-container" id="game-canvas"></div>
        </div>
        
        <div style="background: #f5f5f5; padding: 15px; margin: 20px 0; text-align: left;">
            <h3>Test Checklist:</h3>
            <ul>
                <li>✅ Menu scene loads with proper fade-in</li>
                <li>✅ "PLAY" button transitions smoothly to Level Select</li>
                <li>✅ Level Select shows all 14 levels with proper states</li>
                <li>✅ Level 1 launches and displays correctly</li>
                <li>✅ Level complete overlay shows with proper scoring</li>
                <li>✅ "Next Level" button advances to Level 2</li>
                <li>✅ "Level Select" button returns to selection screen</li>
                <li>✅ All transitions are smooth with no delays</li>
                <li>✅ Save system tracks progress correctly</li>
                <li>✅ Last level shows completion congratulations</li>
            </ul>
        </div>
        
        <div style="background: #e3f2fd; padding: 15px; margin: 20px 0; text-align: left;">
            <h3>Test Instructions:</h3>
            <ol>
                <li><strong>Menu Test:</strong> Verify smooth fade-in and button hover effects</li>
                <li><strong>Level Select Test:</strong> Check level unlock states and button interactions</li>
                <li><strong>Game Flow Test:</strong> Complete Level 1 quickly (aim for hole in 1-2 shots)</li>
                <li><strong>Overlay Test:</strong> Verify level complete overlay shows with correct data</li>
                <li><strong>Navigation Test:</strong> Test both "Next Level" and "Level Select" buttons</li>
                <li><strong>Final Level Test:</strong> Complete all levels to test end-game flow</li>
            </ol>
        </div>
        
        <div style="background: #fff3e0; padding: 15px; margin: 20px 0; text-align: left;">
            <h3>Performance Notes:</h3>
            <ul>
                <li>All scene transitions should be smooth (300ms fade)</li>
                <li>No loading delays between scenes</li>
                <li>Level complete overlay should animate smoothly</li>
                <li>Memory cleanup should prevent performance degradation</li>
                <li>Save system should persist across page reloads</li>
            </ul>
        </div>
    </div>
    
    <script src="main.js"></script>
    
    <script>
        // Add some debug logging for testing
        console.log('=== FINAL GAME FLOW TEST INITIATED ===');
        console.log('Testing complete game loop with level complete overlay');
        
        // Monitor scene changes
        game.scene.scenes.forEach(scene => {
            const originalStart = scene.scene.start;
            scene.scene.start = function(key, data) {
                console.log(`Scene transition: ${scene.scene.key} → ${key}`, data || '');
                return originalStart.call(this, key, data);
            };
        });
        
        // Test completion tracking
        let testStats = {
            menuLoaded: false,
            levelSelectLoaded: false,
            gameLoaded: false,
            levelCompleted: false,
            overlayShown: false
        };
        
        // Update test stats
        setTimeout(() => {
            console.log('=== TEST STATISTICS ===');
            console.log('Menu loaded:', testStats.menuLoaded);
            console.log('Level Select loaded:', testStats.levelSelectLoaded);
            console.log('Game loaded:', testStats.gameLoaded);
            console.log('Level completed:', testStats.levelCompleted);
            console.log('Overlay shown:', testStats.overlayShown);
        }, 5000);
    </script>
</body>
</html>